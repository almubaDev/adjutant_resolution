{% extends 'app/base.html' %}
{% load static %}

{% block title %}Kufi - Tu asistente personal{% endblock %}

{% block content %}
<div class="relative flex flex-col items-center justify-start min-h-screen p-6 gap-12 overflow-hidden">

    <!-- Título -->
    <h1 class="text-2xl sm:text-3xl font-semibold text-gray-800 mt-8">
        Kufi
    </h1>

    <!-- Botón orejita con imagen de Kufi animado -->
    <div onclick="toggleCanvas()"
         class="fixed top-24 right-0 w-16 h-16 bg-white rounded-l-full shadow-md overflow-hidden flex items-center justify-center z-50">
        <img id="kufi-icon" src="{% static 'img/kufi/kufi_default.gif' %}" alt="Kufi" class="w-10 h-10 object-contain">
    </div>

    <!-- Contenedor de interacción (bajado) -->
    <div class="mt-12 w-full max-w-2xl">
        <div class="bg-white p-8 rounded-lg shadow-lg">
            <p class="text-gray-600 text-center">
                Aquí conversarás con <strong>Kufi</strong>.
            </p>
        </div>
    </div>

    <!-- Overlay para el canvas -->
    <div id="overlayCanvas" class="fixed inset-0 bg-black bg-opacity-60 hidden z-40" onclick="toggleCanvas()"></div>

    <!-- Canvas lateral -->
    <div id="canvasMenu"
         class="fixed top-0 right-0 h-full w-64 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 ease-out z-50 rounded-l-lg">
        <div class="flex flex-col h-full p-6 gap-6">
            <h2 class="text-xl font-bold mb-4 brand">Menú de Kufi</h2>
            <a href="#" class="text-gray-700 text-lg hover:text-indigo-600">🛠️ Configurar Perfil</a>
            <a href="{% url 'users:logout' %}" class="text-gray-700 text-lg hover:text-indigo-600">🚪 Cerrar sesión</a>
        </div>
    </div>

</div>

<!-- El toggleCanvas sí va localmente -->
<script>
    function toggleCanvas() {
        const canvas = document.getElementById('canvasMenu');
        const overlay = document.getElementById('overlayCanvas');
        canvas.classList.toggle('translate-x-full');
        overlay.classList.toggle('hidden');
    }
</script>
{% endblock %}
